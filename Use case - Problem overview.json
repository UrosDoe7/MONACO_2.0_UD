{"version":17,"variables":[{"key":"Status","type":"csv","input":"ALL,OPEN,CLOSED","multiple":false,"visible":true,"version":1},{"key":"Severity","type":"csv","visible":true,"input":"ALL,MONITORING UNAVAILABLE,AVAILABILITY,ERROR,SLOWDOWN,RESOURCE_CONTENTION,CUSTOM","multiple":false,"version":1}],"tiles":{"1":{"type":"data","title":"Problem list","query":"fetch dt.davis.problems\n// Lookup for affected_entity_ids and root_cause_entity_id Start\n| expand affected_entity_ids\n| expand root_cause_entity_id\n| lookup [fetch dt.entity.service], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.services\"\n| lookup [fetch dt.entity.service], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.services\"\n| lookup [fetch dt.entity.process_group_instance], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.pgi\"\n| lookup [fetch dt.entity.process_group_instance], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.pgi\"\n| lookup [fetch dt.entity.application], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.applications\"\n| lookup [fetch dt.entity.application], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.applications\"\n| lookup [fetch dt.entity.mobile_application], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.mobile\"\n| lookup [fetch dt.entity.mobile_application], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.mobile\"\n| lookup [fetch dt.entity.custom_application], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.customapplication\"\n| lookup [fetch dt.entity.custom_application], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.customapplication\"\n| lookup [fetch dt.entity.cloud_application], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.cloudapplication\"\n| lookup [fetch dt.entity.cloud_application], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.cloudapplication\"\n| lookup [fetch dt.entity.synthetic_test], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.synthetictest\"\n| lookup [fetch dt.entity.synthetic_test], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.synthetictest\"\n| lookup [fetch dt.entity.http_check], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.httpcheck\"\n| lookup [fetch dt.entity.http_check], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.httpcheck\"\n| lookup [fetch dt.entity.kubernetes_cluster], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.kubernetescluster\"\n| lookup [fetch dt.entity.kubernetes_cluster], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.kubernetescluster\"\n| lookup [fetch dt.entity.host], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.hosts\"\n| lookup [fetch dt.entity.host], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.hosts\"\n| lookup [fetch dt.entity.custom_device], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.customdevices\"\n| lookup [fetch dt.entity.custom_device], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.customdevices\"\n| lookup [fetch dt.entity.hypervisor], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.hypervisor\"\n| lookup [fetch dt.entity.hypervisor], sourceField:root_cause_entity_id, lookupField: id, prefix:\"lookup.rootcause.entity.hypervisor\"\n| lookup [fetch dt.entity.environment], sourceField:affected_entity_ids, lookupField: id, prefix:\"lookup.affected.entity.environment\"\n// Lookup for affected_entity_ids and root_cause_entity_id End\n\n// Summarzation Start - Group Probem Events by Problem ID\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            affectedServices = collectDistinct(lookup.affected.entity.servicesentity.name),\n            affectedPGI = collectDistinct(lookup.affected.entity.pgientity.name),\n            affectedApplications = collectDistinct(lookup.affected.entity.applicationsentity.name),\n            affectedMobile = collectDistinct(lookup.affected.entity.mobileentity.name),\n            affectedCustomApplication = collectDistinct(lookup.affected.entity.customapplicationentity.name),\n            affectedCloudApplication = collectDistinct(lookup.affected.entity.cloudapplicationentity.name),\n            affectedSyntheticTest = collectDistinct(lookup.affected.entity.synthetictestentity.name),\n            affectedHttpCheck = collectDistinct(lookup.affected.entity.httpcheckentity.name),\n            affectedKubernetesCluster = collectDistinct(lookup.affected.entity.kubernetesclusterentity.name),\n            affectedHosts = collectDistinct(lookup.affected.entity.hostsentity.name),\n            affectedCustomDevices = collectDistinct(lookup.affected.entity.customdevicesentity.name),\n            affectedHypervisor = collectDistinct(lookup.affected.entity.hypervisorentity.name),\n            affectedEnvironment = collectDistinct(lookup.affected.entity.environmententity.name),\n            rootCauseServices = collectDistinct(lookup.rootcause.entity.servicesentity.name),\n            rootCausePGI = collectDistinct(lookup.rootcause.entity.pgientity.name),\n            rootCauseApplications = collectDistinct(lookup.rootcause.entity.applicationsentity.name),\n            rootCauseMobile = collectDistinct(lookup.rootcause.entity.mobileentity.name),\n            rootCauseCustomApplication = collectDistinct(lookup.rootcause.entity.customapplicationentity.name),\n            rootCauseSyntheticTest = collectDistinct(lookup.rootcause.entity.synthetictestentity.name),\n            rootCauseHttpCheck = collectDistinct(lookup.rootcause.entity.httpcheckentity.name),\n            rootCauseHosts = collectDistinct(lookup.rootcause.entity.hostsentity.name),\n            rootCauseCustomDevices = collectDistinct(lookup.rootcause.entity.customdevicesentity.name),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n| fieldsAdd currentTime = toTimestamp(now())\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n// Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n\n| filter (\"ALL\" == $Status OR $Status == status)\n| filter (\"ALL\" == $Severity OR $Severity == severityLevel)\n// Dashboard Fitlers End\n\n// Final Result Start\n| fields Status = if((status == \"OPEN\"),\"ðŸ”´ OPEN\", \n                  else:if((status == \"CLOSED\"),\"ðŸŸ¢ CLOSED\")),\n         Problem = concat(display_id,\" - \",event.name),         \n         Severity = severityLevel,\n         Type = (event.name),\n         AffectedCount = arraySize(arrayRemoveNulls(arrayConcat(affectedApplications,affectedMobile,affectedCustomApplication,affectedCloudApplication,affectedSyntheticTest,affectedHttpCheck,affectedServices,affectedPGI,affectedKubernetesCluster,affectedHosts,affectedHypervisor,affectedCustomDevices,affectedEnvironment))),\n         Affected = arrayRemoveNulls(arrayConcat(affectedApplications,affectedMobile,affectedCustomApplication,affectedCloudApplication,affectedSyntheticTest,affectedHttpCheck,affectedServices,affectedPGI,affectedKubernetesCluster,affectedHosts,affectedHypervisor,affectedCustomDevices,affectedEnvironment)),\n         RootCause = arrayRemoveNulls(arrayConcat(rootCauseServices,rootCauseHosts)),\n         StartTime = startTime,\n         EndTime =  if((status == \"OPEN\"),\"In Progress\", \n                    else:if((status == \"CLOSED\"),endTime)),   \n      //   Duration = if((status == \"CLOSED\"),problemClosedDuration,\n      //              else:if((status == \"OPEN\"), currentTime-startTime)),\n\n         `Duration (min)` = if((status == \"CLOSED\"),problemClosedDuration/60000000000,\n                   else:if((status == \"OPEN\"), toLong(currentTime-startTime)/60000000000)),\n      \n         \n         event.id           \n| sort StartTime, direction:\"descending\"\n| sort Status, direction:\"ascending\"\n// Final Result End","visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoricalBarChartSettings":{"categoryAxis":"Status","categoryAxisLabel":"Status","valueAxis":"AffectedCount","valueAxisLabel":"AffectedCount"},"fieldMapping":{"timestamp":"StartTime","leftAxisValues":["AffectedCount"],"leftAxisDimensions":["Status"]},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"Status","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"Status","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[["AffectedCount"],["Type"],["Severity"]],"lineWrapIds":[["Affected"]],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"square","dataMappings":{"value":"AffectedCount"},"displayedFields":["Status"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"AffectedCount","rangeAxis":""},{"valueAxis":"Duration (min)","rangeAxis":""}],"variant":"single","displayedFields":["Status","Problem","Severity","Type","EndTime","event.id"]},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"3":{"type":"data","title":"Number of concurrently active problems over time","query":"fetch dt.davis.problems\n| makeTimeseries count = count(), spread: timeframe(from: event.start, to: coalesce(event.end, now())), by:{event.status}, interval:6h\n| sort event.status desc\n","visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":""},"categoricalBarChartSettings":{"categoryAxis":"event.status","categoryAxisLabel":"event.status","valueAxis":"interval","valueAxisLabel":"interval","layout":"horizontal","scale":"absolute"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain","seriesOverrides":[{"seriesId":["ACTIVE"],"override":{"color":{"Default":"var(--dt-colors-charts-loglevel-emergency-default, #ae132d)"}}},{"seriesId":["CLOSED"],"override":{"color":{"Default":"var(--dt-colors-charts-logstatus-none-default, #2c2f3f)"},"geometry":"line"}},{"seriesId":["OPEN"],"override":{"color":{"Default":"var(--dt-colors-charts-vulnerability-risk-level-critical-default, #970c0c)","Hover":"var(--dt-colors-charts-vulnerability-risk-level-critical-hover, #750b0b)","Active":"var(--dt-colors-charts-vulnerability-risk-level-critical-active, #4b0707)","DefaultTransparent":"var(--dt-colors-charts-vulnerability-risk-level-critical-default-transparent, #591300cc)","HoverTransparent":"var(--dt-colors-charts-vulnerability-risk-level-critical-hover-transparent, #000c)","ActiveTransparent":"var(--dt-colors-charts-vulnerability-risk-level-critical-active-transparent, #000c)"}}}],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["count"],"leftAxisDimensions":["event.status"]},"hiddenLegendFields":[],"leftYAxisSettings":{"isLabelVisible":false,"label":"asdf"},"valueRepresentation":"absolute","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"xAxisScaling":"analyzedTimeframe","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"status","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"status","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[["affected"]],"columnWidths":{},"columnTypeOverrides":[{"fields":["count"],"value":"sparkline","id":1730920851185}]},"honeycomb":{"shape":"square","dataMappings":{"value":"interval"},"displayedFields":["event.status"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["event.status"]},"valueBoundaries":{"min":"auto","max":"auto"},"unitsOverrides":[{"identifier":null,"unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1717671507313}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"4":{"type":"data","title":"Total","query":"fetch dt.davis.problems\n// First Summarzation Start - Group Probem Events by Problem ID\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n//| filter (\"ALL\" == $Status OR $Status == status) \n| filter (\"ALL\" == $Status or $Severity == severityLevel)// Dashboard Fitlers End\n\n// Second Summarzation Start - Sumamrize Total Problem Count\n| summarize Total = count()\n// Second Summarzation End - Summarize Total Problem Count\n","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":"","groupingThresholdValue":0,"valueType":"relative"},"categoricalBarChartSettings":{"categoryAxisLabel":"Total","valueAxisLabel":"Total","layout":"horizontal","scale":"absolute","categoryAxis":["Total"],"valueAxis":["Total"],"tooltipVariant":"single"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain","truncationMode":"middle"},"singleValue":{"showLabel":false,"label":"Total","prefixIcon":"","autoscale":false,"alignment":"center","sparklineSettings":{"isVisible":false},"recordField":"Total","trend":{"trendType":"auto","isVisible":false}},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":[null],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}],"variant":"single","displayedFields":[]},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"5":{"type":"data","title":"Closed","query":"fetch dt.davis.problems\n\n// First Summarzation Start - Group Probem Events by Problem ID\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n| filter (\"ALL\" == $Severity OR $Severity == severityLevel)\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize Closed Problem Count\n| summarize Total = countIf(status == \"CLOSED\")\n// Second Summarzation End - Summarize Closed Problem Count\n","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":"","groupingThresholdValue":0,"valueType":"relative"},"categoricalBarChartSettings":{"categoryAxisLabel":"Total","valueAxisLabel":"Total","layout":"horizontal","scale":"absolute","categoryAxis":["Total"],"valueAxis":["Total"],"tooltipVariant":"single"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain","truncationMode":"middle"},"singleValue":{"showLabel":false,"label":"Total","prefixIcon":"CheckCircleIcon","autoscale":false,"alignment":"center","recordField":"Total","trend":{"trendType":"auto","isVisible":false},"sparklineSettings":{}},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":[null],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}],"variant":"single","displayedFields":[]},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"6":{"type":"data","title":"Open","query":"fetch dt.davis.problems\n\n// First Summarzation Start - Group Probem Events by Problem ID\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n| filter (\"ALL\" == $Severity OR $Severity == severityLevel)\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize Open Problems Count\n| summarize Total = countIf(status == \"ACTIVE\")\n// Second Summarzation End - Summarize Open Problems Count\n","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":"","groupingThresholdValue":0,"valueType":"relative"},"categoricalBarChartSettings":{"categoryAxisLabel":"Total","valueAxisLabel":"Total","layout":"horizontal","scale":"absolute","categoryAxis":["Total"],"valueAxis":["Total"],"tooltipVariant":"single"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain","truncationMode":"middle"},"singleValue":{"showLabel":false,"label":"Total","prefixIcon":"ErrorIcon","autoscale":false,"alignment":"center","recordField":"Total","trend":{"trendType":"auto","isVisible":false},"sparklineSettings":{}},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":[null],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}],"variant":"single","displayedFields":[]},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"7":{"type":"data","title":"Closed MTTR (Minutes) ","query":"fetch dt.davis.problems\n// First Summarzation Start - Group Probem Events by Problem ID\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n| filter (\"ALL\" == $Severity OR $Severity == severityLevel)\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize Closed Problems MTTR\n| summarize  `ClosedProblemsMTTR` = avg(toDouble(problemClosedDuration))/60000000000\n// Second Summarzation End - Summarize Closed Problems MTTR","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":"","groupingThresholdValue":0,"valueType":"relative"},"categoricalBarChartSettings":{"categoryAxisLabel":"ClosedProblemsMTTR","valueAxisLabel":"ClosedProblemsMTTR","layout":"horizontal","scale":"absolute","categoryAxis":["ClosedProblemsMTTR"],"valueAxis":["ClosedProblemsMTTR"],"tooltipVariant":"single"},"legend":{"position":"right","hidden":false},"colorPalette":"purple-rain","truncationMode":"middle"},"singleValue":{"showLabel":false,"label":"ClosedProblemsMTTR","prefixIcon":"","autoscale":true,"alignment":"center","sparklineSettings":{"isVisible":false},"recordField":"ClosedProblemsMTTR","trend":{"trendType":"auto","isVisible":false}},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"square","dataMappings":{"value":"ClosedProblemsMTTR"},"displayedFields":[null],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"ClosedProblemsMTTR","rangeAxis":""}],"variant":"single","displayedFields":[]},"valueBoundaries":{"min":"auto","max":"auto"},"unitsOverrides":[{"identifier":"ClosedProblemsMTTR","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1741851739979}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"9":{"type":"markdown","title":"","content":"### Problem reporting template\n---\nThis template provides examples for problem-related health indicators, such as measuring the mean time to resolve incidents (MTTR) and identifying the most affected components. Although Dynatrace provides a [pre-built problems app](https://wkf10640.apps.dynatrace.com/ui/apps/dynatrace.davis.problems) that offers an operational overview of issues within an environment, these examples assist in implementing your custom use cases.   \nLearn more about this reporting use cases [visit our documentation](https://www.dynatrace.com/support/help/shortlink/davis-dql-examples)\n"},"11":{"type":"data","title":"Top Problem affected Topology","query":"fetch dt.davis.problems\n| expand affected_entity_ids\n| filterOut affected_entity_ids == \"ENVIRONMENT-0000000000000001\"\n| summarize count=count(), by:{affected_entity_ids}","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"affected_entity_ids","categoryAxisLabel":"affected_entity_ids","valueAxis":"count","valueAxisLabel":"count"}},"singleValue":{"showLabel":true,"label":"affected_entity_ids","prefixIcon":"","recordField":"affected_entity_ids","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":false}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"bottom"},"colorMode":"color-palette","colorPalette":"red","dataMappings":{"value":"count"},"displayedFields":["affected_entity_ids"]},"histogram":{"dataMappings":[{"valueAxis":"count","rangeAxis":""}],"variant":"single","displayedFields":["affected_entity_ids"]},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"12":{"type":"data","title":"Largest Problem Blast Radius (number of affected entities)","query":"fetch dt.davis.problems\n| fieldsAdd countAffected = arraySize(affected_entity_ids)\n| filterOut affected_entity_ids == \"ENVIRONMENT-0000000000000001\"","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"honeycomb","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"event.name","categoryAxisLabel":"event.name","valueAxis":"countAffected","valueAxisLabel":"countAffected"},"fieldMapping":{"timestamp":"timestamp","leftAxisValues":["countAffected"],"leftAxisDimensions":["display_id"]},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"affected_entity_ids","prefixIcon":"","recordField":"affected_entity_ids","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":false}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":true},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"countAffected"},"displayedFields":["display_id"]},"histogram":{"dataMappings":[{"valueAxis":"countAffected","rangeAxis":""},{"valueAxis":"resolved_problem_duration","rangeAxis":""},{"valueAxis":"dt.davis.affected_users_count","rangeAxis":""}],"variant":"single","displayedFields":["display_id","dt.davis.mute.status","event.category","event.description","event.id","event.kind","event.name","event.status","event.status_transition"]},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"13":{"type":"data","title":"Closed problem MTTR (Minutes) by severity level","query":"fetch dt.davis.problems\n// First Summarzation Start - Group Probem Events by Problem ID\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false and status == \"CLOSED\"\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n| filter (\"ALL\" == $Severity OR $Severity == severityLevel)\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize Closed Problems MTTR by Severity Level\n| summarize  ClosedProblemsMTTR = avg(toDouble(problemClosedDuration))/60000000000, by:{severityLevel}\n| sort ClosedProblemsMTTR, direction:\"descending\"\n// Second Summarzation End - Summarize Closed Problems MTTR by Severity Level","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":""},"categoricalBarChartSettings":{"categoryAxis":"severityLevel","categoryAxisLabel":"severityLevel","valueAxis":"ClosedProblemsMTTR","valueAxisLabel":"ClosedProblemsMTTR","layout":"horizontal","scale":"absolute","categoryAxisTickLayout":"horizontal","colorPaletteMode":"single-color","isValueLabelVisible":false},"legend":{"hidden":true},"colorPalette":"categorical","truncationMode":"middle"},"singleValue":{"showLabel":false,"label":"severityLevel","prefixIcon":"","autoscale":true,"alignment":"center","sparklineSettings":{"isVisible":false},"recordField":"severityLevel","trend":{"trendType":"auto","isVisible":false}},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"square","dataMappings":{"value":"ClosedProblemsMTTR"},"displayedFields":["severityLevel"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"ClosedProblemsMTTR","rangeAxis":""}],"variant":"single","displayedFields":["severityLevel"]},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"14":{"type":"data","title":"Count by severity level","query":"fetch dt.davis.problems\n// First Summarzation Start - Group Probem Events by Problem ID\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n// First Summarzation End - Group Probem Events by Problem ID\n\n// Dashboard Fitlers Start\n| filter (\"ALL\" == $Status OR $Status == status) \n| filter (\"ALL\" == $Severity OR $Severity == severityLevel)// Dashboard Fitlers End\n// Dashboard Fitlers End\n\n// Second Summarzation Start - Summarize by Severity Level\n| summarize Total = count(), by:{Severity = severityLevel}\n| sort Total, direction:\"descending\"\n// Second Summarzation End - Summarize by Severity Level","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoricalBarChartSettings":{"categoryAxis":"Severity","categoryAxisLabel":"Severity","valueAxis":"Total","valueAxisLabel":"Total","layout":"horizontal","colorPaletteMode":"single-color","isCategoryLabelVisible":false,"isValueLabelVisible":false},"legend":{"hidden":true},"colorPalette":"purple-rain","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"Severity","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"Severity","trend":{"trendType":"auto","isVisible":false}},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":["Severity"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}],"variant":"single","displayedFields":["Severity"]},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"15":{"type":"data","title":"Count by name","query":"fetch dt.davis.problems\n\n// First Summarzation Start - Group Probem Events by Problem Type\n| summarize {startTime = takeFirst(event.start),\n            endTime = takeFirst(event.end),\n            problemClosedDuration = takeFirst(resolved_problem_duration),\n            status = takeFirst(event.status),\n            event.name = takeFirst(event.name),\n            severityLevel = takeFirst(event.category),\n            affected = takeFirst(affected_entity_ids),\n            rootCause = takeFirst(root_cause_entity_id),\n            dt.davis.is_duplicate = takeFirst(dt.davis.is_duplicate),\n            event.id = takeFirst(event.id)}, \n            by:{display_id}\n| filter `dt.davis.is_duplicate` == false\n| fieldsAdd status = if((status == \"ACTIVE\"),\"OPEN\", \n                else:if((status == \"CLOSED\"), \"CLOSED\"))\n// Summarzation End - Group Probem Events by Problem Type\n\n// Dashboard Fitlers Start\n\n| filter (\"ALL\" == $Status OR $Status == status)\n| filter (\"ALL\" == $Severity OR $Severity == severityLevel)\n// Dashboard Fitlers End\n\n\n// Second Summarzation Start - Summarize by Problem Type\n| summarize Total = count(), by:{Type = event.name}\n| sort Total, direction:\"descending\"\n// Second Summarzation Start - Summarize by Problem Type\n\n","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","hideLabels":false,"groupingName":"","groupingThresholdValue":null},"categoricalBarChartSettings":{"categoryAxis":"Type","categoryAxisLabel":"Type","valueAxis":"Total","valueAxisLabel":"Total","layout":"horizontal","scale":"absolute","colorPaletteMode":"single-color","isCategoryLabelVisible":false,"categoryAxisTickLayout":"horizontal","isValueLabelVisible":false},"legend":{"hidden":true},"colorPalette":"blue-steel","truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"Type","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"Type","trend":{"trendType":"auto","isVisible":false}},"table":{"rowDensity":"condensed","enableLineWrap":true,"enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"square","dataMappings":{"value":"Total"},"displayedFields":["Type"],"legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue"},"histogram":{"dataMappings":[{"valueAxis":"Total","rangeAxis":""}],"variant":"single","displayedFields":["Type"]},"valueBoundaries":{"min":"auto","max":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":100,"defaultSamplingRatio":10,"enableSampling":false},"davis":{}},"16":{"type":"data","title":"","query":"timeseries avg(dt.containers.cpu.shares)\n| fieldsAdd dt.containers.cpu.shares = \"avg(dt.containers.cpu.shares)\"\n| fieldsAdd value.A = arrayAvg(`avg(dt.containers.cpu.shares)`)","queryConfig":{"version":"13.0.0","subQueries":[{"id":"A","isEnabled":true,"datatype":"metrics","metric":{"key":"dt.containers.cpu.shares","aggregation":"avg"}}]},"subType":"dql-builder-metrics","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["dt.containers.cpu.shares"],"categoryAxisLabel":"dt.containers.cpu.shares","valueAxis":["value.A"],"valueAxisLabel":"value.A","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"hiddenLegendFields":["value.A"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["avg(dt.containers.cpu.shares)"]},"leftYAxisSettings":{"isLabelVisible":true,"label":"Containers: CPU shares"}},"singleValue":{"showLabel":true,"label":"dt.containers.cpu.shares","prefixIcon":"","recordField":"dt.containers.cpu.shares","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["avg(dt.containers.cpu.shares)"],"value":"sparkline","id":1730922050568}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["dt.containers.cpu.shares"],"dataMappings":{"value":"value.A"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"interval","rangeAxis":""},{"valueAxis":"value.A","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["dt.containers.cpu.shares"]}},"davis":{},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}},"layouts":{"1":{"x":0,"y":16,"w":24,"h":9},"3":{"x":6,"y":3,"w":18,"h":4},"4":{"x":0,"y":3,"w":3,"h":2},"5":{"x":3,"y":5,"w":3,"h":2},"6":{"x":0,"y":5,"w":3,"h":2},"7":{"x":3,"y":3,"w":3,"h":2},"9":{"x":0,"y":0,"w":19,"h":3},"11":{"x":0,"y":7,"w":12,"h":6},"12":{"x":12,"y":7,"w":12,"h":4},"13":{"x":0,"y":13,"w":8,"h":3},"14":{"x":8,"y":13,"w":8,"h":3},"15":{"x":16,"y":11,"w":8,"h":3},"16":{"x":0,"y":25,"w":24,"h":6}},"importedWithCode":false,"settings":{"defaultSegments":{"value":[],"enabled":true}}}