{"version":17,"variables":[{"key":"vcenter","type":"query","visible":true,"input":"fetch `dt.entity.vmware:host`\n| fieldsAdd runs_on, host_power_state, tags, vcenter\n| fieldsFlatten runs_on\n| fields vcenter\n| dedup vcenter","multiple":true,"defaultValue":["3420b2ac-f1cf-4b24-b62d-61ba1ba8ed05*"]},{"key":"datacenter","type":"query","visible":true,"input":"fetch `dt.entity.vmware:datacenter`\n| fieldsAdd tags, vcenter\n| fields entity.name\n| dedup entity.name","multiple":true},{"key":"cluster","type":"query","visible":true,"input":"fetch `dt.entity.vmware:cluster`\n| fieldsAdd tags, vcenter\n| fieldsAdd child_of\n| fieldsFlatten child_of\n| fieldsRename `dt.entity.vmware:datacenter`=`child_of.dt.entity.vmware:datacenter`\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n| fields entity.name","multiple":true,"defaultValue":["3420b2ac-f1cf-4b24-b62d-61ba1ba8ed05*"]},{"key":"datastore","type":"query","visible":true,"input":"fetch `dt.entity.vmware:datastore`\n| fieldsAdd child_of\n| fieldsFlatten child_of\n| fieldsRename `dt.entity.vmware:datacenter` = `child_of.dt.entity.vmware:datacenter`\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n| fields entity.name","multiple":true,"defaultValue":["3420b2ac-f1cf-4b24-b62d-61ba1ba8ed05*"]},{"key":"host","type":"query","visible":true,"input":"fetch `dt.entity.vmware:host`\n| fieldsAdd runs_on \n| fieldsFlatten runs_on \n| fieldsRename `dt.entity.vmware:cluster` = `runs_on.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`)\n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| fields entity.name\n","multiple":true}],"tiles":{"1":{"type":"markdown","title":"","content":"# Cluster Resource Forecasting Overview\n***"},"3":{"type":"markdown","title":"","content":"## Currently monitoring\n"},"4":{"type":"data","title":"vCenters","query":"timeseries host_info = avg(vmware.info.host_info), by: { `dt.entity.vmware:vcenter` }\n| summarize host_info = countDistinct(`dt.entity.vmware:vcenter`)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"host_info.single_value","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":["host_info"],"categoryAxisLabel":"host_info","valueAxis":["host_info"],"valueAxisLabel":"host_info","tooltipVariant":"single"},"truncationMode":"middle"},"singleValue":{"showLabel":false,"recordField":"host_info","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","record":"host_info","visible":false,"isVisible":false},"trend":{"relative":true,"visible":false,"isVisible":false,"trendType":"auto"},"colorThresholdTarget":"value","label":"host_info"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"host_info"},"displayedFields":[null]},"histogram":{"dataMappings":[{"valueAxis":"host_info","rangeAxis":""}],"variant":"single","displayedFields":[]},"unitsOverrides":[{"identifier":"host_info.single_value","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"host_info.single_value"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"5":{"type":"data","title":"Clusters","query":"timeseries host_info = avg(vmware.info.host_info), by: { `dt.entity.vmware:vcenter`,`dt.entity.vmware:datacenter`,`dt.entity.vmware:cluster`, cluster.name }\n| filterOut cluster.name == \"No Cluster\"\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:datacenter`), entityName(`dt.entity.vmware:vcenter`) \n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n| filter in(`dt.entity.vmware:vcenter.name`, $vcenter)\n| summarize countDistinct(`dt.entity.vmware:cluster`)\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"host_info.single_value","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":["countDistinct(`dt.entity.vmware:cluster`)"],"categoryAxisLabel":"countDistinct(`dt.entity.vmware:cluster`)","valueAxis":["countDistinct(`dt.entity.vmware:cluster`)"],"valueAxisLabel":"countDistinct(`dt.entity.vmware:cluster`)","tooltipVariant":"single"},"truncationMode":"middle"},"singleValue":{"showLabel":false,"recordField":"countDistinct(`dt.entity.vmware:cluster`)","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","record":"host_info","visible":false,"isVisible":false},"trend":{"relative":true,"visible":false,"isVisible":false,"trendType":"auto"},"colorThresholdTarget":"value","label":"countDistinct(`dt.entity.vmware:cluster`)"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{},"displayedFields":[]},"histogram":{"dataMappings":[{"valueAxis":"countDistinct(`dt.entity.vmware:cluster`)","rangeAxis":""}],"variant":"single","displayedFields":[]},"unitsOverrides":[{"identifier":"host_info.single_value","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"host_info.single_value"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"6":{"type":"data","title":"Data Centers","query":"timeseries host_info = avg(vmware.info.host_info), by: {`dt.entity.vmware:vcenter`,`dt.entity.vmware:datacenter` }\n\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n\n| summarize host_info = countDistinct(`dt.entity.vmware:datacenter`)\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"host_info.single_value","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":["host_info"],"categoryAxisLabel":"host_info","valueAxis":["host_info"],"valueAxisLabel":"host_info","tooltipVariant":"single"},"truncationMode":"middle"},"singleValue":{"showLabel":false,"recordField":"host_info","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","record":"host_info","visible":false,"isVisible":false},"trend":{"relative":true,"visible":false,"isVisible":false,"trendType":"auto"},"colorThresholdTarget":"value","label":"host_info"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{},"displayedFields":[]},"histogram":{"dataMappings":[{"valueAxis":"host_info","rangeAxis":""}],"variant":"single","displayedFields":[]},"unitsOverrides":[{"identifier":"host_info.single_value","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"host_info.single_value"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"7":{"type":"data","title":"Active VMs","query":"timeseries vm_info = avg(vmware.info.vm_info), by: { `dt.entity.vmware:virtualmachine` }, \nfilter: { (vm.connection.state == \"connected\") AND (vm.power.state == \"poweredOn\") }\n\n| fieldsAdd entityAttr(`dt.entity.vmware:virtualmachine`,\"runs_on\")\n| fieldsFlatten `dt.entity.vmware:virtualmachine.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:host` = `abc.dt.entity.vmware:host`\n| fieldsAdd entityAttr(`dt.entity.vmware:host`, \"runs_on\")\n| fieldsFlatten `dt.entity.vmware:host.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:cluster` = `abc.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:host`) \n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in( `dt.entity.vmware:host.name`,$host)\n\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n//| filter in(`dt.entity.vmware:vcenter.name`, $vcenter)\n \n| summarize countDistinct(`dt.entity.vmware:virtualmachine`)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"vm_info.single_value","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":["countDistinct(`dt.entity.vmware:virtualmachine`)"],"categoryAxisLabel":"countDistinct(`dt.entity.vmware:virtualmachine`)","valueAxis":["countDistinct(`dt.entity.vmware:virtualmachine`)"],"valueAxisLabel":"countDistinct(`dt.entity.vmware:virtualmachine`)","tooltipVariant":"single"},"truncationMode":"middle"},"singleValue":{"showLabel":false,"recordField":"countDistinct(`dt.entity.vmware:virtualmachine`)","autoscale":false,"sparklineSettings":{"showTicks":true,"variant":"area","record":"vm_info","visible":false,"isVisible":false},"trend":{"relative":true,"visible":false,"isVisible":false,"trendType":"auto"},"colorThresholdTarget":"value","label":"countDistinct(`dt.entity.vmware:virtualmachine`)"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{},"displayedFields":[]},"histogram":{"dataMappings":[{"valueAxis":"countDistinct(`dt.entity.vmware:virtualmachine`)","rangeAxis":""}],"variant":"single","displayedFields":[]},"unitsOverrides":[{"identifier":"countDistinct(`dt.entity.vmware:virtualmachine`)","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":0,"suffix":"","delimiter":false,"added":0,"id":"vm_info.single_value"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"8":{"type":"data","title":"Hosts in a Cluster","query":"timeseries host_info = avg(vmware.info.host_info), by: { `dt.entity.vmware:host`, cluster.name }\n| filterOut cluster.name == \"No Cluster\"\n| filter in(cluster.name, $cluster)\n| summarize countDistinct(`dt.entity.vmware:host`)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"host_info.single_value","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":["countDistinct(`dt.entity.vmware:host`)"],"categoryAxisLabel":"countDistinct(`dt.entity.vmware:host`)","valueAxis":["countDistinct(`dt.entity.vmware:host`)"],"valueAxisLabel":"countDistinct(`dt.entity.vmware:host`)","tooltipVariant":"single"},"truncationMode":"middle"},"singleValue":{"showLabel":false,"recordField":"countDistinct(`dt.entity.vmware:host`)","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","record":"host_info","visible":false,"isVisible":false},"trend":{"relative":true,"visible":false,"isVisible":false,"trendType":"auto"},"colorThresholdTarget":"value","label":"countDistinct(`dt.entity.vmware:host`)"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{},"displayedFields":[]},"histogram":{"dataMappings":[{"valueAxis":"countDistinct(`dt.entity.vmware:host`)","rangeAxis":""}],"variant":"single","displayedFields":[]},"unitsOverrides":[{"identifier":"host_info.single_value","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"host_info.single_value"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"9":{"type":"data","title":"Standalone Hosts","query":"timeseries host_info = avg(vmware.info.host_info), by: { `dt.entity.vmware:host`, cluster.name }\n| filterOut cluster.name != \"No Cluster\"\n| summarize countDistinct(`dt.entity.vmware:host`)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"host_info.single_value","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":["countDistinct(`dt.entity.vmware:host`)"],"categoryAxisLabel":"countDistinct(`dt.entity.vmware:host`)","valueAxis":["countDistinct(`dt.entity.vmware:host`)"],"valueAxisLabel":"countDistinct(`dt.entity.vmware:host`)","tooltipVariant":"single"},"truncationMode":"middle"},"singleValue":{"showLabel":false,"recordField":"countDistinct(`dt.entity.vmware:host`)","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","record":"host_info","visible":false,"isVisible":false},"trend":{"relative":true,"visible":false,"isVisible":false,"trendType":"auto"},"colorThresholdTarget":"value","label":"countDistinct(`dt.entity.vmware:host`)"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"countDistinct(`dt.entity.vmware:host`)"},"displayedFields":[null]},"histogram":{"dataMappings":[{"valueAxis":"countDistinct(`dt.entity.vmware:host`)","rangeAxis":""}],"variant":"single","displayedFields":[]},"unitsOverrides":[{"identifier":"host_info.single_value","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"host_info.single_value"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"10":{"type":"data","title":"Disconnected Hosts","query":"timeseries host_info = avg(vmware.info.host_info), by: { `dt.entity.vmware:host`, host.connected.state }\n| filterOut host.connected.state != \"disconnected\"\n\n| fieldsAdd entityAttr(`dt.entity.vmware:host`, \"runs_on\")\n| fieldsFlatten `dt.entity.vmware:host.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:cluster` = `abc.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:host`) \n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in( `dt.entity.vmware:host.name`,$host)\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n\n\n| summarize countDistinct(`dt.entity.vmware:host`)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"countDistinct(`dt.entity.vmware:host`)","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":1}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":["countDistinct(`dt.entity.vmware:host`)"],"categoryAxisLabel":"countDistinct(`dt.entity.vmware:host`)","valueAxis":["countDistinct(`dt.entity.vmware:host`)"],"valueAxisLabel":"countDistinct(`dt.entity.vmware:host`)","tooltipVariant":"single"},"truncationMode":"middle"},"singleValue":{"showLabel":false,"recordField":"countDistinct(`dt.entity.vmware:host`)","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","record":"host_info","visible":false,"isVisible":false},"trend":{"relative":true,"visible":false,"isVisible":false,"trendType":"auto"},"colorThresholdTarget":"value","label":"countDistinct(`dt.entity.vmware:host`)"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{},"displayedFields":[]},"histogram":{"dataMappings":[{"valueAxis":"countDistinct(`dt.entity.vmware:host`)","rangeAxis":""}],"variant":"single","displayedFields":[]},"unitsOverrides":[{"identifier":"host_info.single_value","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"host_info.single_value"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"11":{"type":"data","title":"Datastores","query":"timeseries vm_info = avg(vmware.info.datastore_info), by: { `dt.entity.vmware:datastore`}\n| fieldsAdd entityAttr(`dt.entity.vmware:datastore`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:datastore.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter` =`abc.dt.entity.vmware:datacenter`\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n\n| summarize countDistinct(`dt.entity.vmware:datastore`)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"datastore_info.single_value","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"hiddenLegendFields":[],"categoricalBarChartSettings":{"categoryAxis":["countDistinct(`dt.entity.vmware:datastore`)"],"categoryAxisLabel":"countDistinct(`dt.entity.vmware:datastore`)","valueAxis":["countDistinct(`dt.entity.vmware:datastore`)"],"valueAxisLabel":"countDistinct(`dt.entity.vmware:datastore`)","tooltipVariant":"single"},"truncationMode":"middle"},"singleValue":{"showLabel":false,"recordField":"countDistinct(`dt.entity.vmware:datastore`)","autoscale":true,"sparklineSettings":{"showTicks":true,"variant":"area","record":"datastore_info","visible":false,"isVisible":false},"trend":{"relative":true,"visible":false,"isVisible":false,"trendType":"auto"},"colorThresholdTarget":"value","label":"countDistinct(`dt.entity.vmware:datastore`)"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{},"displayedFields":[]},"histogram":{"dataMappings":[{"valueAxis":"countDistinct(`dt.entity.vmware:datastore`)","rangeAxis":""}],"variant":"single","displayedFields":[]},"unitsOverrides":[{"identifier":"datastore_info.single_value","unitCategory":"unspecified","baseUnit":"count","displayUnit":"","decimals":0,"suffix":"","delimiter":false,"added":0,"id":"datastore_info.single_value"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"13":{"type":"markdown","title":"","content":"## VMware Clusters"},"14":{"type":"data","title":"VMware Cluster","query":"timeseries by: {`dt.entity.vmware:cluster` }, filter: { cluster.name != \"No Cluster\" },  {\n  cpu_capacity = avg(vmware.cluster.cpu.capacity),\n  cpu_used= avg(vmware.cluster.cpu.used),\n  mem_capacity = avg(vmware.cluster.mem.capacity),\n  mem_used= avg(vmware.cluster.mem.used),\n  storage_capacity = avg(vmware.cluster.storage.capacity),\n  storage_used= avg(vmware.cluster.storage.used)\n}\n| lookup [\n    fetch `dt.entity.vmware:cluster`\n    | fields id, entity.name, cluster = record(entityId=id, displayName=entity.name, dim=\"dt.entity.vmware:cluster\")\n],\n sourceField: `dt.entity.vmware:cluster`,\n lookupField: id,\n fields: cluster\n| fieldsAdd\n  name = entityName(`dt.entity.vmware:cluster`),\n  cpu_cap      = arrayLast(cpu_capacity),\n  cpu_used     = arrayLast(cpu_used),\n  mem_cap      = arrayLast(mem_capacity),\n  mem_used     = arrayLast(mem_used),\n  storage_cap  = arrayLast(storage_capacity),\n  storage_used = arrayLast(storage_used)\n\n| fieldsAdd   cpu_used_perc= 100*cpu_used/cpu_cap,  mem_used_perc= 100*mem_used/mem_cap,storage_used_perc = 100*storage_used/storage_cap\n\n| fields name, cpu_used, cpu_cap, cpu_used_perc, mem_used, mem_cap, mem_used_perc, storage_used, storage_cap, storage_used_perc\n| filter in( name ,$cluster)\n\n| fieldsRename `Cluster`=name, \n               `CPU Used`=cpu_used,\n               `CPU Capacity`=cpu_cap,\n               `CPU Used %` = cpu_used_perc,\n               `Memory Used`=mem_used,\n               `Memory Capacity`=mem_cap,\n               `Memory Used %`=mem_used_perc,\n               `Storage Used`=storage_used,\n               `Storage Capacity`=storage_cap,\n               `Storage Used %`=storage_used_perc","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"CPU Used %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":20},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":15},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":0}],"isEnabled":true},{"id":1,"field":"Memory Used %","title":"","isEnabled":true,"rules":[{"id":0,"color":"#7DC540","comparator":"≥","label":"","value":20},{"id":1,"color":"#F5D30F","comparator":"≥","label":"","value":15},{"id":2,"color":"#DC172A","comparator":"≥","label":"","value":0}]},{"id":2,"field":"Storage Used %","title":"","isEnabled":true,"rules":[{"id":0,"color":"#7DC540","comparator":"≥","label":"","value":0},{"id":1,"color":"#F5D30F","comparator":"≥","label":"","value":50},{"id":2,"color":"#DC172A","comparator":"≥","label":"","value":75}]},{"id":3,"field":"Memory Used %","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6863)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eca440)"},"comparator":"≥","label":"","value":60},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c4233b)"},"comparator":"≥","label":"","value":80}]}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"Cluster","valueAxisLabel":"CPU Used,CPU Capacity,CPU Used %,Memory Used,Memory Capacity,Memory Used %,Storage Used,Storage Capacity,Storage Used %","categoryAxis":["Cluster"],"valueAxis":["CPU Used","CPU Capacity","CPU Used %","Memory Used","Memory Capacity","Memory Used %","Storage Used","Storage Capacity","Storage Used %"],"tooltipVariant":"single"},"hiddenLegendFields":[],"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:cluster","prefixIcon":"","recordField":"dt.entity.vmware:cluster","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:cluster.name"],["B:dt.entity.vmware:cluster.name"],["timeframe"],["interval"]],"colorThresholdTarget":"background","columnWidths":{"[\"Cluster Name\"]":186.328125,"[\"Storage Used\"]":299.1875,"[\"Memory Capacity\"]":223.609375,"[\"Memory Used\"]":313.265625,"[\"CPU Capacity\"]":260.765625,"[\"CPU Used\"]":286.421875,"[\"Cluster\"]":184.70312500000003,"[\"Storage Capacity\"]":248.45001220703125,"[\"CPU Used %\"]":210.27083587646484,"[\"Memory Used %\"]":237.125},"columnTypeOverrides":[],"rowDensity":"condensed","enableThresholdInRow":false,"selectedColumnForRowThreshold":"Storage Used %"},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"CPU Used"},"displayedFields":["Cluster"]},"histogram":{"dataMappings":[{"valueAxis":"CPU Used","rangeAxis":""},{"valueAxis":"CPU Capacity","rangeAxis":""},{"valueAxis":"CPU Used %","rangeAxis":""},{"valueAxis":"Memory Used","rangeAxis":""},{"valueAxis":"Memory Capacity","rangeAxis":""},{"valueAxis":"Memory Used %","rangeAxis":""},{"valueAxis":"Storage Used","rangeAxis":""},{"valueAxis":"Storage Capacity","rangeAxis":""},{"valueAxis":"Storage Used %","rangeAxis":""}],"variant":"single","displayedFields":["Cluster"]},"unitsOverrides":[{"identifier":"CPU Used","unitCategory":"frequency","baseUnit":"megahertz","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average","displayUnit":null},{"identifier":"CPU Capacity","unitCategory":"frequency","baseUnit":"megahertz","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542519264},{"identifier":"Memory Used","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542599196},{"identifier":"Memory Capacity","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542625895},{"identifier":"Storage Capacity","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542641423},{"identifier":"Storage Used","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542722559},{"identifier":"CPU Used %","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1734423851762},{"identifier":"Memory Used %","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1734423865853},{"identifier":"Storage Used %","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1734423873701}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"15":{"type":"markdown","title":"","content":"## VMware Hosts"},"16":{"type":"data","title":"VMware Host","query":"timeseries by: {`dt.entity.vmware:host`}, {\n  average_cpu = avg(vmware.host.cpu.usage.average),\n  average_mem = avg(vmware.host.mem.usage.average)\n}\n| fieldsAdd average_cpu = arrayAvg(average_cpu), average_mem = arrayAvg(average_mem), entityName(`dt.entity.vmware:host`), alias: Name\n\n| fieldsAdd entityAttr(`dt.entity.vmware:host`, \"runs_on\")\n| fieldsFlatten `dt.entity.vmware:host.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:cluster` = `abc.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:host`) \n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in( `dt.entity.vmware:host.name`,$host)\n\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n| sort average_cpu desc\n| fields Name, average_cpu, average_mem\n| fieldsRename `Host Name`=Name, `Average CPU %`=average_cpu, `Average Memory %`=average_mem","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"Average CPU %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":75},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":90}],"isEnabled":true},{"id":"1","title":"","field":"Average Memory %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":60},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":90}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":["Host Name"],"categoryAxisLabel":"Host Name","valueAxis":["Average CPU %","Average Memory %"],"valueAxisLabel":"Average CPU %,Average Memory %","tooltipVariant":"single"},"hiddenLegendFields":[],"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:host","prefixIcon":"","recordField":"dt.entity.vmware:host","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:host.name"],["B:dt.entity.vmware:host.name"],["timeframe"],["interval"]],"colorThresholdTarget":"background","columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"Average CPU %"},"displayedFields":["Host Name"]},"histogram":{"dataMappings":[{"valueAxis":"Average CPU %","rangeAxis":""},{"valueAxis":"Average Memory %","rangeAxis":""}],"variant":"single","displayedFields":["Host Name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"},{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"%","delimiter":false,"added":1,"id":"average"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"17":{"type":"data","title":"CPU Usage","query":"timeseries average = avg(vmware.host.cpu.usage.average), by: { `dt.entity.vmware:host` }, interval:1m\n| sort arrayAvg(average) desc\n| fieldsAdd entityAttr(`dt.entity.vmware:host`, \"runs_on\")\n| fieldsFlatten `dt.entity.vmware:host.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:cluster` = `abc.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:host`) \n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in( `dt.entity.vmware:host.name`,$host)\n\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n\n| limit 20","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"average","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"isLabelVisible":true,"label":""},"categoricalBarChartSettings":{"categoryAxis":["dt.entity.vmware:host","dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:host.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"],"categoryAxisLabel":"dt.entity.vmware:host,dt.entity.vmware:cluster,dt.entity.vmware:cluster.name,dt.entity.vmware:host.name,dt.entity.vmware:datacenter,dt.entity.vmware:datacenter.name","valueAxis":["interval"],"valueAxisLabel":"interval","tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:host","interval"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["average"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:host","prefixIcon":"","recordField":"dt.entity.vmware:host","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["average"],"value":"sparkline","id":1734092967773}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.vmware:host"},"displayedFields":["dt.entity.vmware:host","dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:host.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.vmware:host","dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:host.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"}],"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"18":{"type":"data","title":"Memory Usage","query":"timeseries average = avg(vmware.host.mem.usage.average), by: { `dt.entity.vmware:host` }\n| sort arrayAvg(average) desc\n| fieldsAdd entityAttr(`dt.entity.vmware:host`, \"runs_on\")\n| fieldsFlatten `dt.entity.vmware:host.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:cluster` = `abc.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:host`) \n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in( `dt.entity.vmware:host.name`,$host)\n\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n| fieldsAdd entityName(`dt.entity.vmware:host`)\n| limit 20","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"average","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"isLabelVisible":true,"label":""},"categoricalBarChartSettings":{"categoryAxis":["dt.entity.vmware:host","dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:host.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"],"categoryAxisLabel":"dt.entity.vmware:host,dt.entity.vmware:cluster,dt.entity.vmware:cluster.name,dt.entity.vmware:host.name,dt.entity.vmware:datacenter,dt.entity.vmware:datacenter.name","valueAxis":["interval"],"valueAxisLabel":"interval","tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:host","interval"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["average"],"leftAxisDimensions":["dt.entity.vmware:host","dt.entity.vmware:host.runs_on","dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:host.name","dt.entity.vmware:cluster.child_of","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:host","prefixIcon":"","recordField":"dt.entity.vmware:host","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["average"],"value":"sparkline","id":1734092969217}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.vmware:host"},"displayedFields":["dt.entity.vmware:host","dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:host.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.vmware:host","dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:host.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"19":{"type":"markdown","title":"","content":"## VMware VMs"},"20":{"type":"data","title":"VMware VM","query":"timeseries by:{dt.entity.host}, filter: { in(dt.entity.host, classicEntitySelector(\"type(host),hostVirtualizationType(\\\"VMWARE\\\")\")) },\n\n{\n  average_mem = avg(dt.host.memory.usage),\n  average_cpu = avg(dt.host.cpu.usage)\n}\n\n| fieldsAdd average_cpu = arrayAvg(average_cpu), average_mem = arrayAvg(average_mem), entityName(`dt.entity.host`), alias: Name\n| sort average_cpu desc\n\n| fields Name, average_cpu, average_mem\n| fieldsRename `Host Name`=Name, `Average CPU %`=average_cpu, `Average Memory %`=average_mem","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"Average CPU %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":75},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":90}],"isEnabled":true},{"id":"1","title":"","field":"Average Memory %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":60},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":90}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"Host Name","valueAxisLabel":"Average CPU %,Average Memory %","categoryAxis":["Host Name"],"valueAxis":["Average CPU %","Average Memory %"],"tooltipVariant":"single"},"hiddenLegendFields":[],"truncationMode":"middle","xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","leftYAxisSettings":{"isLabelVisible":true,"label":"Memory used %"}},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:virtualmachine","prefixIcon":"","recordField":"dt.entity.vmware:virtualmachine","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:virtualmachine.name"],["B:dt.entity.vmware:virtualmachine.name"],["timeframe"],["interval"]],"colorThresholdTarget":"background","columnWidths":{"[\"Host Name\"]":251.15625,"[\"Average CPU %\"]":181.578125},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"Average CPU %"},"displayedFields":["Host Name"]},"histogram":{"dataMappings":[{"valueAxis":"Average CPU %","rangeAxis":""},{"valueAxis":"Average Memory %","rangeAxis":""}],"variant":"single","displayedFields":["Host Name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"},{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":1,"id":"average"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"21":{"type":"data","title":"CPU Usage","query":"timeseries average = avg(dt.host.cpu.usage), by: { `dt.entity.host` }, interval:1m,\nfilter: { in(dt.entity.host, classicEntitySelector(\"type(host),hostVirtualizationType(\\\"VMWARE\\\")\"))}\n\n| sort arrayAvg(average) desc\n| fieldsAdd entityName(`dt.entity.host`)\n| fieldsAdd entityAttr(dt.entity.host, \"runs_on\")\n| fieldsFlatten dt.entity.host.runs_on\n| fieldsRename dt.entity.hypervisor= dt.entity.host.runs_on.dt.entity.hypervisor\n| fieldsAdd entityName(dt.entity.hypervisor)\n| filter in( dt.entity.hypervisor.name,$host)\n\n| limit 20","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"average","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"isLabelVisible":true,"label":""},"categoricalBarChartSettings":{"categoryAxis":["dt.entity.host","dt.entity.host.name","dt.entity.hypervisor","dt.entity.hypervisor.name","dt.entity.host.runs_on.dt.entity.virtualmachine"],"categoryAxisLabel":"dt.entity.host,dt.entity.host.name,dt.entity.hypervisor,dt.entity.hypervisor.name,dt.entity.host.runs_on.dt.entity.virtualmachine","valueAxis":["interval"],"valueAxisLabel":"interval","tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:virtualmachine","interval"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["average"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:virtualmachine","prefixIcon":"","recordField":"dt.entity.vmware:virtualmachine","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["average"],"value":"sparkline","id":1733995759859}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.host"},"displayedFields":["dt.entity.host","dt.entity.host.name","dt.entity.hypervisor","dt.entity.hypervisor.name","dt.entity.host.runs_on.dt.entity.virtualmachine"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.host","dt.entity.host.name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"22":{"type":"data","title":"Memory Usage","query":"timeseries average = avg(dt.host.memory.usage), by: { `dt.entity.host` }\n| sort arrayAvg(average) desc\n| fieldsAdd entityName(`dt.entity.host`)\n| fieldsAdd entityAttr(dt.entity.host, \"runs_on\")\n| fieldsFlatten dt.entity.host.runs_on\n| fieldsRename dt.entity.hypervisor= dt.entity.host.runs_on.dt.entity.hypervisor\n| fieldsAdd entityName(dt.entity.hypervisor)\n| filter in( dt.entity.hypervisor.name,$host)\n\n| limit 20","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"average","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"isLabelVisible":true,"label":""},"categoricalBarChartSettings":{"categoryAxis":["dt.entity.host","dt.entity.host.name","dt.entity.hypervisor","dt.entity.hypervisor.name","dt.entity.host.runs_on.dt.entity.virtualmachine"],"categoryAxisLabel":"dt.entity.host,dt.entity.host.name,dt.entity.hypervisor,dt.entity.hypervisor.name,dt.entity.host.runs_on.dt.entity.virtualmachine","valueAxis":["interval"],"valueAxisLabel":"interval","tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:virtualmachine","interval"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["average"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:virtualmachine","prefixIcon":"","recordField":"dt.entity.vmware:virtualmachine","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["average"],"value":"sparkline","id":1733995784823}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.host"},"displayedFields":["dt.entity.host","dt.entity.host.name","dt.entity.hypervisor","dt.entity.hypervisor.name","dt.entity.host.runs_on.dt.entity.virtualmachine"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.host","dt.entity.host.name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"23":{"type":"markdown","title":"","content":"## VMware Datastores"},"24":{"type":"data","title":"VMware Datastores","query":"timeseries { freeSpace = avg(vmware.datastore.freeSpace), capacity = avg(vmware.datastore.capacity) }, by: { `dt.entity.vmware:datastore`}\n| fieldsAdd entityName(`dt.entity.vmware:datastore`)\n| filter in($datastore, `dt.entity.vmware:datastore.name`)\n| fieldsAdd used = 100 - (100 * (freeSpace[] / capacity[] ))\n| fieldsAdd used = arrayLast(used)\n| sort used desc\n| join [ timeseries freeSpace = avg(vmware.datastore.freeSpace), by: { `dt.entity.vmware:datastore` }\n       | fieldsAdd freeSpace = arrayLast(freeSpace) ], on: { `dt.entity.vmware:datastore` }, fields: {freeSpace, `dt.entity.vmware:datastore`, interval, timeframe}, kind: outer\n| join [ timeseries capacity = avg(vmware.datastore.capacity), by: { `dt.entity.vmware:datastore` }\n       | fieldsAdd capacity = arrayLast(capacity) ], on: { `dt.entity.vmware:datastore` }, fields: {capacity, `dt.entity.vmware:datastore`, interval, timeframe}, kind: outer\n| fieldsAdd entityName(`dt.entity.vmware:datastore`), alias: Name\n| fields Name, freeSpace, capacity, used\n| fieldsRename `Datastore Name`=Name, `Free Space`=freeSpace, `Capacity`=capacity, `Used %`=used\n| sort `Used %` desc","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"Used %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":70},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":90}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":["Datastore Name"],"categoryAxisLabel":"Datastore Name","valueAxis":["Free Space","Capacity","Used %"],"valueAxisLabel":"Free Space,Capacity,Used %","tooltipVariant":"single"},"hiddenLegendFields":[],"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"used","prefixIcon":"","recordField":"used","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:datastore.name"],["B:dt.entity.vmware:datastore.name"],["C:dt.entity.vmware:datastore.name"],["timeframe"],["interval"]],"colorThresholdTarget":"background","columnWidths":{"[\"dt.entity.vmware:datastore\"]":310.78125,"[\"Capacity\"]":201.890625,"[\"Free Space\"]":157.3125},"columnTypeOverrides":[]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"Free Space"},"displayedFields":["Datastore Name"]},"histogram":{"dataMappings":[{"valueAxis":"Free Space","rangeAxis":""},{"valueAxis":"Capacity","rangeAxis":""},{"valueAxis":"Used %","rangeAxis":""}],"variant":"single","displayedFields":["Datastore Name"]},"unitsOverrides":[{"identifier":"Free Space","unitCategory":"data","baseUnit":"byte","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"used","displayUnit":null},{"identifier":"Capacity","unitCategory":"data","baseUnit":"byte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722541161317},{"identifier":"Used %","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722541171408}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"25":{"type":"data","title":"Top Datastore Usage","query":"timeseries { freeSpace = avg(vmware.datastore.freeSpace), capacity = avg(vmware.datastore.capacity) }, by: { device.address, dt.metrics.source, datastore.id, `dt.entity.vmware:datastore`, `dt.entity.vmware:vcenter`, datastore.name }\n| fieldsAdd entityName(`dt.entity.vmware:datastore`)\n| filter in($datastore, `dt.entity.vmware:datastore.name`)\n\n| fieldsAdd used = 100 - (100 * (freeSpace[] / capacity[] ))\n| summarize { used = avg(used[] ) }, by: { `dt.entity.vmware:datastore`, interval, timeframe }\n| sort arrayAvg(used) desc\n| fieldsAdd entityName(`dt.entity.vmware:datastore`)\n| limit 10","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"used","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","seriesOverrides":[],"gapPolicy":"connect","legend":{"hidden":true},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":["dt.entity.vmware:datastore","dt.entity.vmware:datastore.name"],"categoryAxisLabel":"dt.entity.vmware:datastore,dt.entity.vmware:datastore.name","valueAxis":["interval"],"valueAxisLabel":"interval","tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:datastore","interval"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["used"],"leftAxisDimensions":["dt.entity.vmware:datastore","dt.entity.vmware:datastore.name"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:datastore","prefixIcon":"","recordField":"dt.entity.vmware:datastore","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{},"columnTypeOverrides":[{"fields":["used"],"value":"sparkline","id":1733995502579}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.vmware:datastore"},"displayedFields":["dt.entity.vmware:datastore","dt.entity.vmware:datastore.name"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.vmware:datastore","dt.entity.vmware:datastore.name"]},"unitsOverrides":[{"identifier":"used","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"used"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"28":{"type":"data","title":"Host CPU Usage","query":"timeseries average = avg(vmware.host.cpu.usage.average), by: { `dt.entity.vmware:host` }, from:now()-90d, to:now()\n| fieldsAdd entityName(`dt.entity.vmware:host`)\n| filter in(`dt.entity.vmware:host.name`, $host)\n| sort arrayAvg(average) desc\n| fields average, interval, `dt.entity.vmware:host.name`, timeframe\n| limit 20","davis":{"enabled":true,"componentState":{"selectedAnalyzerName":"dt.statistics.ui.ForecastAnalyzer","inputData":{"dt.statistics.ui.ForecastAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now-2h","endTime":"now"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"forecastHorizon":600,"forecastOffset":1,"query":"timeseries average = avg(vmware.host.cpu.usage.average), by: { `dt.entity.vmware:host` }, from:now()-90d, to:now()\n| fieldsAdd entityName(`dt.entity.vmware:host`)\n| filter in(`dt.entity.vmware:host.name`, \"npmp2198.admin.macif.fr\",\"npmp2197.admin.macif.fr\",\"npmp2180.admin.macif.fr\",\"npmp2179.admin.macif.fr\",\"npmp2194.admin.macif.fr\",\"npmp2195.admin.macif.fr\")\n| sort arrayAvg(average) desc\n| fields average, interval, `dt.entity.vmware:host.name`, timeframe\n| limit 20"}}},"davisVisualization":{"isAvailable":true,"selectedOutputs":["779141808","-318860075"],"settings":{"visibleSections":"VISUALIZATION"}}},"visualization":"davis","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"average","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"isLabelVisible":true,"label":""},"categoricalBarChartSettings":{"categoryAxis":"dt.entity.vmware:host.name","categoryAxisLabel":"dt.entity.vmware:host.name","valueAxis":"interval","valueAxisLabel":"interval"},"hiddenLegendFields":["dt.entity.vmware:host"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["average"],"leftAxisDimensions":["dt.entity.vmware:host","dt.entity.vmware:host.name"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:host","prefixIcon":"","recordField":"dt.entity.vmware:host","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"interval"},"displayedFields":["dt.entity.vmware:host"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.vmware:host","dt.entity.vmware:host.name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"}],"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"29":{"type":"data","title":"Host Memory Usage","query":"timeseries average = avg(vmware.host.mem.usage.average), by: { `dt.entity.vmware:host` }, from:now()-90d, to:now()\n| sort arrayAvg(average) desc\n| fieldsAdd entityName(`dt.entity.vmware:host`)\n| filter in(`dt.entity.vmware:host.name`, $host)\n| limit 20","davis":{"enabled":true,"componentState":{"selectedAnalyzerName":"dt.statistics.ui.ForecastAnalyzer","inputData":{"dt.statistics.ui.ForecastAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now-2h","endTime":"now"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"forecastHorizon":600,"forecastOffset":1,"query":"timeseries average = avg(vmware.host.mem.usage.average), by: { `dt.entity.vmware:host` }, from:now()-90d, to:now()\n| sort arrayAvg(average) desc\n| fieldsAdd entityName(`dt.entity.vmware:host`)\n| filter in(`dt.entity.vmware:host.name`, \"npmp2198.admin.macif.fr\",\"npmp2197.admin.macif.fr\",\"npmp2180.admin.macif.fr\",\"npmp2179.admin.macif.fr\",\"npmp2194.admin.macif.fr\",\"npmp2195.admin.macif.fr\")\n| limit 20"}}},"davisVisualization":{"isAvailable":true,"selectedOutputs":["779141808","-1672810589","-318860075"],"settings":{"visibleSections":"VISUALIZATION"}}},"visualization":"davis","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"average","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"isLabelVisible":true,"label":""},"categoricalBarChartSettings":{"categoryAxis":["dt.entity.vmware:host","dt.entity.vmware:host.name"],"categoryAxisLabel":"dt.entity.vmware:host,dt.entity.vmware:host.name","valueAxis":["interval"],"valueAxisLabel":"interval","tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:host"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["average"],"leftAxisDimensions":["dt.entity.vmware:host","dt.entity.vmware:host.name"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:host","prefixIcon":"","recordField":"dt.entity.vmware:host","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.vmware:host"},"displayedFields":["dt.entity.vmware:host","dt.entity.vmware:host.name"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.vmware:host","dt.entity.vmware:host.name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"}],"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"30":{"type":"data","title":"Top Datastore Usage","query":"timeseries { freeSpace = avg(vmware.datastore.freeSpace), capacity = avg(vmware.datastore.capacity) }, by: { device.address, dt.metrics.source, datastore.id, `dt.entity.vmware:datastore`, `dt.entity.vmware:vcenter`, datastore.name }, from:now()-180d, to:now()\n| fieldsAdd used = 100 - (100 * (freeSpace[] / capacity[] ))\n| summarize { used = avg(used[] ) }, by: { `dt.entity.vmware:datastore`, interval, timeframe }\n| sort arrayAvg(used) desc\n| fieldsAdd entityName(`dt.entity.vmware:datastore`)\n| filter in($datastore, `dt.entity.vmware:datastore.name`)\n\n| limit 10","davis":{"enabled":true,"componentState":{"selectedAnalyzerName":"dt.statistics.ui.ForecastAnalyzer","inputData":{"dt.statistics.ui.ForecastAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now-2h","endTime":"now"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"forecastHorizon":600,"forecastOffset":1,"query":"timeseries { freeSpace = avg(vmware.datastore.freeSpace), capacity = avg(vmware.datastore.capacity) }, by: { device.address, dt.metrics.source, datastore.id, `dt.entity.vmware:datastore`, `dt.entity.vmware:vcenter`, datastore.name }, from:now()-180d, to:now()\n| fieldsAdd used = 100 - (100 * (freeSpace[] / capacity[] ))\n| summarize { used = avg(used[] ) }, by: { `dt.entity.vmware:datastore`, interval, timeframe }\n| sort arrayAvg(used) desc\n| fieldsAdd entityName(`dt.entity.vmware:datastore`)\n| filter in(\"NVVR_A_HPROD_INTRANET_DP1_0_005\",\"NVVR_A_HPROD_INTRANET_DP2_0_006\",\"local_npmp1407\",\"NVVR_A_HPROD_INTRANET_DP1_0_007\",\"local_npmp1400\",\"nas-iso\",\"local_npmp2344\",\"NVVR_A_HPROD_INTRANET_DP1_0_002\",\"local_npmp1418\",\"local_npmp1489\",\"local_npmp1404\",\"local_npmp1490\",\"NVVR_A_HPROD_INTRANET_DP2_0_001\",\"local_npmp1423\",\"local_npmp1491\",\"NVVR_A_HPROD_INTRANET_DP1_0_006\",\"NVVR_A_HPROD_INTRANET_DP1_0_004\",\"NVVR_A_HPROD_INTRANET_DP2_0_005\",\"local_npmp1408\",\"local_npmp1409\",\"local_npmp1405\",\"NVVR_A_HPROD_INTERNET_DP2_0_001\",\"local_npmp1403\",\"local_npmp1492\",\"SYSTEM\",\"local_npmp1406\",\"local_npmp2334\",\"NVVR_A_HPROD_INTRANET_DP1_0_003\",\"NVVR_A_HPROD_INTRANET_DP2_0_002\",\"NVVR_A_HPROD_INTRANET_DP1_0_001\",\"local_npmp1419\",\"local_npmp1401\",\"NVVR_A_HPROD_INTRANET_DP2_0_004\",\"NVVZ_A_INTRANET_DP1_0_001\",\"NVVR_A_HPROD_INTRANET_DP2_0_003\",\"local_npmp1425\",\"NVVZ_A_INTRANET_DP2_0_001\",\"NVVR_A_HPROD_INTRANET_02_S_1_001_VDI\",\"local_npmp1424\", `dt.entity.vmware:datastore.name`)\n\n| limit 10"}}},"davisVisualization":{"isAvailable":true,"selectedOutputs":["-450370597","-2110557542","1472535454","587071811"],"settings":{"visibleSections":"VISUALIZATION"}}},"visualization":"davis","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"used","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","seriesOverrides":[],"gapPolicy":"connect","legend":{"hidden":true},"leftYAxisSettings":{"label":""},"categoricalBarChartSettings":{"categoryAxis":["dt.entity.vmware:datastore","dt.entity.vmware:datastore.name"],"categoryAxisLabel":"dt.entity.vmware:datastore,dt.entity.vmware:datastore.name","valueAxis":["interval"],"valueAxisLabel":"interval","tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:datastore"],"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["used"],"leftAxisDimensions":["dt.entity.vmware:datastore","dt.entity.vmware:datastore.name"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:datastore","prefixIcon":"","recordField":"dt.entity.vmware:datastore","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.vmware:datastore"},"displayedFields":["dt.entity.vmware:datastore","dt.entity.vmware:datastore.name"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.vmware:datastore","dt.entity.vmware:datastore.name"]},"unitsOverrides":[{"identifier":"used","unitCategory":"percentage","baseUnit":"percent","displayUnit":"","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"used"}],"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"31":{"type":"data","title":"Memory capacity VMware Cluster","query":"timeseries by: {`dt.entity.vmware:cluster` }, filter: { cluster.name != \"No Cluster\" },from:now()-90d, to:now(),  {\n  mem_capacity = avg(vmware.cluster.mem.capacity),\n  mem_used= avg(vmware.cluster.mem.used)  \n  }\n| fieldsAdd  mem_perc_used = 100*mem_used[]/mem_capacity[]\n| fieldsRemove mem_used, mem_capacity\n| fieldsAdd entityName(`dt.entity.vmware:cluster`)\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter`\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n//| filter in(`dt.entity.vmware:vcenter.name`, $vcenter)\n","davis":{"enabled":true,"componentState":{"selectedAnalyzerName":"dt.statistics.ui.ForecastAnalyzer","inputData":{"dt.statistics.ui.ForecastAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now-2h","endTime":"now"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"forecastHorizon":200,"forecastOffset":1,"query":"timeseries by: {`dt.entity.vmware:cluster` }, filter: { cluster.name != \"No Cluster\" },from:now()-90d, to:now(),  {\n  mem_capacity = avg(vmware.cluster.mem.capacity),\n  mem_used= avg(vmware.cluster.mem.used)  \n  }\n| fieldsAdd  mem_perc_used = 100*mem_used[]/mem_capacity[]\n| fieldsRemove mem_used, mem_capacity\n| fieldsAdd entityName(`dt.entity.vmware:cluster`)\n| filter in( `dt.entity.vmware:cluster.name`,\"NCLP0124\")\n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter`\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in(`dt.entity.vmware:datacenter.name`, \"HPROD_INTRANET_DP2\",\"HPROD_INTERNET\")\n//| filter in(`dt.entity.vmware:vcenter.name`, $vcenter)\n"}},"analyzerHints":{}},"davisVisualization":{"isAvailable":true,"settings":{"visibleSections":"VISUALIZATION"},"selectedOutputs":["1599476286","-465956522","1888472152"]}},"visualization":"davis","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"average","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"dt.entity.vmware:cluster,dt.entity.vmware:cluster.name,dt.entity.vmware:datacenter,dt.entity.vmware:datacenter.name","valueAxisLabel":"interval","categoryAxis":["dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"],"valueAxis":["interval"],"tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:cluster","dt.entity.vmware:cluster.child_of","dt.entity.vmware:datacenter","mem_capacity","mem_used"],"truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["mem_perc_used"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","leftYAxisSettings":{"isLabelVisible":true,"label":"Cluster Memory Capacity • Cluster Memory Used • Cluster Storage Capacity • Cluster Storage Used"}},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:cluster","prefixIcon":"","recordField":"dt.entity.vmware:cluster","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:cluster.name"],["B:dt.entity.vmware:cluster.name"],["timeframe"],["interval"]],"colorThresholdTarget":"value","columnWidths":{"[\"Cluster Name\"]":186.328125,"[\"Storage Used\"]":231.1875,"[\"Memory Capacity\"]":223.609375,"[\"Memory Used\"]":171.265625,"[\"CPU Capacity\"]":183.765625,"[\"CPU Used\"]":136.421875,"[\"Cluster\"]":186.703125},"columnTypeOverrides":[{"fields":["mem_perc_used"],"value":"sparkline","id":1733920345638}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.vmware:cluster"},"displayedFields":["dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.vmware:cluster"]},"unitsOverrides":[{"identifier":"CPU Used","unitCategory":"frequency","baseUnit":"megahertz","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average","displayUnit":null},{"identifier":"CPU Capacity","unitCategory":"frequency","baseUnit":"megahertz","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542519264},{"identifier":"Memory Used","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542599196},{"identifier":"Memory Capacity","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542625895},{"identifier":"Storage Capacity","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542641423},{"identifier":"Storage Used","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542722559},{"identifier":"mem_perc_used","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1733920249556}],"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"32":{"type":"markdown","title":"","content":"# VMware Overview\n***"},"33":{"type":"data","title":"CPU capacity VMware Cluster","query":"timeseries by: {`dt.entity.vmware:cluster` }, filter: { cluster.name != \"No Cluster\" },from:now()-90d, to:now(),  {\n  cpu_capacity = avg(vmware.cluster.cpu.capacity),\n  cpu_used= avg(vmware.cluster.cpu.used)  \n  }\n| fieldsAdd  mem_perc_used = 100*cpu_used[]/cpu_capacity[]\n| fieldsRemove cpu_used, cpu_capacity\n| fieldsAdd entityName(`dt.entity.vmware:cluster`)\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter`\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n//| filter in(`dt.entity.vmware:vcenter.name`, $vcenter)\n","davis":{"enabled":true,"componentState":{"selectedAnalyzerName":"dt.statistics.ui.ForecastAnalyzer","inputData":{"dt.statistics.ui.ForecastAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now-2h","endTime":"now"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"forecastHorizon":200,"forecastOffset":1,"query":"timeseries by: {`dt.entity.vmware:cluster` }, filter: { cluster.name != \"No Cluster\" },from:now()-90d, to:now(),  {\n  cpu_capacity = avg(vmware.cluster.cpu.capacity),\n  cpu_used= avg(vmware.cluster.cpu.used)  \n  }\n| fieldsAdd  mem_perc_used = 100*cpu_used[]/cpu_capacity[]\n| fieldsRemove cpu_used, cpu_capacity\n| fieldsAdd entityName(`dt.entity.vmware:cluster`)\n| filter in( `dt.entity.vmware:cluster.name`,\"NCLP0124\")\n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter`\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in(`dt.entity.vmware:datacenter.name`, \"HPROD_INTRANET_DP2\",\"HPROD_INTERNET\")\n//| filter in(`dt.entity.vmware:vcenter.name`, $vcenter)\n"}}},"davisVisualization":{"isAvailable":true,"settings":{"visibleSections":"VISUALIZATION"},"selectedOutputs":["62724613","1897364542","-886900849","-168068266","-2108606888","-1807017393"]}},"visualization":"davis","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"average","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"dt.entity.vmware:cluster,dt.entity.vmware:cluster.name,dt.entity.vmware:datacenter,dt.entity.vmware:datacenter.name","valueAxisLabel":"interval","categoryAxis":["dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"],"valueAxis":["interval"],"tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:cluster","dt.entity.vmware:cluster.child_of","dt.entity.vmware:datacenter","mem_capacity","mem_used"],"truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["mem_perc_used"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","leftYAxisSettings":{"isLabelVisible":true,"label":"Cluster Memory Capacity • Cluster Memory Used • Cluster Storage Capacity • Cluster Storage Used"}},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:cluster","prefixIcon":"","recordField":"dt.entity.vmware:cluster","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:cluster.name"],["B:dt.entity.vmware:cluster.name"],["timeframe"],["interval"]],"colorThresholdTarget":"value","columnWidths":{"[\"Cluster Name\"]":186.328125,"[\"Storage Used\"]":231.1875,"[\"Memory Capacity\"]":223.609375,"[\"Memory Used\"]":171.265625,"[\"CPU Capacity\"]":183.765625,"[\"CPU Used\"]":136.421875,"[\"Cluster\"]":186.703125},"columnTypeOverrides":[{"fields":["mem_perc_used"],"value":"sparkline","id":1733920345638}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.vmware:cluster"},"displayedFields":["dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.vmware:cluster"]},"unitsOverrides":[{"identifier":"CPU Used","unitCategory":"frequency","baseUnit":"megahertz","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average","displayUnit":null},{"identifier":"CPU Capacity","unitCategory":"frequency","baseUnit":"megahertz","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542519264},{"identifier":"Memory Used","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542599196},{"identifier":"Memory Capacity","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542625895},{"identifier":"Storage Capacity","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542641423},{"identifier":"Storage Used","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542722559},{"identifier":"mem_perc_used","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1733920249556}],"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"34":{"type":"markdown","title":"","content":"# Resource allocation\n***"},"35":{"type":"data","title":"VMware Host","query":"timeseries by: {`dt.entity.vmware:host`}, {\n  average_mem = avg(vmware.host.mem.usage.average)\n}\n \n| join[\n timeseries by: {`dt.entity.vmware:host`}, from:now()-7d, to:now(),\n{\n  average_mem = avg(vmware.host.mem.usage.average)\n}\n], on:{`dt.entity.vmware:host`}, prefix:\"7d_\"\n\n| join[\n timeseries by: {`dt.entity.vmware:host`}, from:now()-30d, to:now(),\n{\n  average_mem = avg(vmware.host.mem.usage.average)\n}\n], on:{`dt.entity.vmware:host`}, prefix:\"30d_\"\n\n| fieldsAdd average_mem_7d =arrayAvg(`7d_average_mem` ),average_mem_30d =arrayAvg(`30d_average_mem`),  average_mem = arrayAvg(average_mem), entityName(`dt.entity.vmware:host`), alias: Name\n| fieldsAdd entityAttr(`dt.entity.vmware:host`, \"runs_on\")\n| fieldsFlatten `dt.entity.vmware:host.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:cluster` = `abc.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:host`) \n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in( `dt.entity.vmware:host.name`,$host)\n\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n| fields Name, average_mem, average_mem_7d, average_mem_30d\n| fieldsRename `Host Name`=Name, `Average Memory %`=average_mem, `Average Memory % 7d`=average_mem_7d, `Average Memory % 30d`=average_mem_30d\n\n| sort `Average Memory %` asc\n| limit 10","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"Average Memory %","rules":[{"id":"0","label":"","comparator":"<","color":"#7dc540","value":100},{"id":"1","label":"","comparator":"<","color":"#f5d30f","value":40},{"id":"2","label":"","comparator":"<","color":"#dc172a","value":25}],"isEnabled":true},{"id":"1","title":"","field":"Average Memory %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":60},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":90}],"isEnabled":false}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":["Host Name"],"categoryAxisLabel":"Host Name","valueAxis":["Average Memory %","Average Memory % 7d","Average Memory % 30d"],"valueAxisLabel":"Average Memory %,Average Memory % 7d,Average Memory % 30d","tooltipVariant":"single"},"hiddenLegendFields":[],"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:host","prefixIcon":"","recordField":"dt.entity.vmware:host","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:host.name"],["B:dt.entity.vmware:host.name"],["timeframe"],["interval"]],"colorThresholdTarget":"background","columnTypeOverrides":[],"columnWidths":{"[\"Average CPU %\"]":745.5593872070312,"[\"Average Memory % 7d\"]":262.9875030517578,"[\"Average Memory %\"]":286.4125061035156}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"Average Memory %"},"displayedFields":["Host Name"]},"histogram":{"dataMappings":[{"valueAxis":"Average Memory %","rangeAxis":""},{"valueAxis":"Average Memory % 7d","rangeAxis":""},{"valueAxis":"Average Memory % 30d","rangeAxis":""}],"variant":"single","displayedFields":["Host Name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"},{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"%","delimiter":false,"added":1,"id":"average"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"37":{"type":"data","title":"VMware Host CPU","query":"timeseries by: {`dt.entity.vmware:host`}, {\n  average_cpu = avg(vmware.host.cpu.usage.average)\n}\n\n\n| join[\n timeseries by: {`dt.entity.vmware:host`}, \n{\n  max_cpu = max(vmware.host.cpu.usage.average)\n}\n], on:{`dt.entity.vmware:host`}\n\n\n \n| join[\n timeseries by: {`dt.entity.vmware:host`}, from:now()-7d, to:now(),\n{\n  average_cpu = avg(vmware.host.cpu.usage.average)\n}\n], on:{`dt.entity.vmware:host`}, prefix:\"7d_\"\n\n\n| join[\n timeseries by: {`dt.entity.vmware:host`}, from:now()-30d, to:now(),\n{\n  average_cpu = avg(vmware.host.cpu.usage.average)\n}\n], on:{`dt.entity.vmware:host`}, prefix:\"30d_\"\n\n\n\n| fieldsAdd average_cpu_7d =arrayAvg(`7d_average_cpu` ),max_cpu = arrayMax(right.max_cpu) ,average_cpu_30d =arrayAvg(`30d_average_cpu`), average_cpu = arrayAvg(average_cpu), entityName(`dt.entity.vmware:host`), alias: Name\n\n| fieldsAdd entityAttr(`dt.entity.vmware:host`, \"runs_on\")\n| fieldsFlatten `dt.entity.vmware:host.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:cluster` = `abc.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:host`) \n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in( `dt.entity.vmware:host.name`,$host)\n\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n| fields Name, average_cpu,max_cpu, average_cpu_7d, average_cpu_30d\n| fieldsRename `Host Name`=Name, `Average CPU %`=average_cpu, `Max CPU %` = max_cpu, `Average CPU % 7d`=average_cpu_7d, `Average CPU % 30d`=average_cpu_30d\n\n| sort `Average CPU %` asc\n| limit 10","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"Average CPU %","rules":[{"id":"0","label":"","comparator":"<","color":"#7dc540","value":100},{"id":"1","label":"","comparator":"<","color":"#f5d30f","value":40},{"id":"2","label":"","comparator":"<","color":"#dc172a","value":25}],"isEnabled":true},{"id":"1","title":"","field":"Average Memory %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":60},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":90}],"isEnabled":false}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":["Host Name"],"categoryAxisLabel":"Host Name","valueAxis":["Average CPU %","Max CPU %","Average CPU % 7d","Average CPU % 30d"],"valueAxisLabel":"Average CPU %,Max CPU %,Average CPU % 7d,Average CPU % 30d","tooltipVariant":"single"},"hiddenLegendFields":[],"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:host","prefixIcon":"","recordField":"dt.entity.vmware:host","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:host.name"],["B:dt.entity.vmware:host.name"],["timeframe"],["interval"]],"colorThresholdTarget":"background","columnTypeOverrides":[],"columnWidths":{"[\"Average CPU %\"]":216.55938720703125,"[\"Host Name\"]":318.3874969482422,"[\"Average CPU % 7d\"]":206.1374969482422,"[\"Max CPU %\"]":234.63125610351562}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"Average CPU %"},"displayedFields":["Host Name"]},"histogram":{"dataMappings":[{"valueAxis":"Average CPU %","rangeAxis":""},{"valueAxis":"Max CPU %","rangeAxis":""},{"valueAxis":"Average CPU % 7d","rangeAxis":""},{"valueAxis":"Average CPU % 30d","rangeAxis":""}],"variant":"single","displayedFields":["Host Name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"},{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"%","delimiter":false,"added":1,"id":"average"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"39":{"type":"markdown","title":"","content":"## Underutilized Hosts"},"40":{"type":"markdown","title":"","content":"## Overutilized Hosts\n"},"41":{"type":"data","title":"VMware Host","query":"timeseries by: {`dt.entity.vmware:host`}, {\n  average_mem = avg(vmware.host.mem.usage.average)\n}\n \n| join[\n timeseries by: {`dt.entity.vmware:host`}, from:now()-7d, to:now(),\n{\n  average_mem = avg(vmware.host.mem.usage.average)\n}\n], on:{`dt.entity.vmware:host`}, prefix:\"7d_\"\n\n| join[\n timeseries by: {`dt.entity.vmware:host`}, from:now()-30d, to:now(),\n{\n  average_mem = avg(vmware.host.mem.usage.average)\n}\n], on:{`dt.entity.vmware:host`}, prefix:\"30d_\"\n\n| fieldsAdd average_mem_7d =arrayAvg(`7d_average_mem` ),average_mem_30d =arrayAvg(`30d_average_mem`),  average_mem = arrayAvg(average_mem), entityName(`dt.entity.vmware:host`), alias: Name\n| fieldsAdd entityAttr(`dt.entity.vmware:host`, \"runs_on\")\n| fieldsFlatten `dt.entity.vmware:host.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:cluster` = `abc.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:host`) \n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in( `dt.entity.vmware:host.name`,$host)\n\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n| fields Name, average_mem, average_mem_7d, average_mem_30d\n| fieldsRename `Host Name`=Name, `Average Memory %`=average_mem, `Average Memory % 7d`=average_mem_7d, `Average Memory % 30d`=average_mem_30d\n\n| sort `Average Memory %` desc\n| limit 10","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"Average Memory %","rules":[{"id":"0","label":"","comparator":"<","color":"#7dc540","value":100},{"id":"1","label":"","comparator":"<","color":"#f5d30f","value":40},{"id":"2","label":"","comparator":"<","color":"#dc172a","value":25}],"isEnabled":true},{"id":"1","title":"","field":"Average Memory %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":60},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":90}],"isEnabled":false}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":["Host Name"],"categoryAxisLabel":"Host Name","valueAxis":["Average Memory %","Average Memory % 7d","Average Memory % 30d"],"valueAxisLabel":"Average Memory %,Average Memory % 7d,Average Memory % 30d","tooltipVariant":"single"},"hiddenLegendFields":[],"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:host","prefixIcon":"","recordField":"dt.entity.vmware:host","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:host.name"],["B:dt.entity.vmware:host.name"],["timeframe"],["interval"]],"colorThresholdTarget":"background","columnTypeOverrides":[],"columnWidths":{"[\"Average CPU %\"]":745.5593872070312,"[\"Average Memory % 7d\"]":428.9875030517578,"[\"Average Memory %\"]":286.4125061035156}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"Average Memory %"},"displayedFields":["Host Name"]},"histogram":{"dataMappings":[{"valueAxis":"Average Memory %","rangeAxis":""},{"valueAxis":"Average Memory % 7d","rangeAxis":""},{"valueAxis":"Average Memory % 30d","rangeAxis":""}],"variant":"single","displayedFields":["Host Name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"},{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"%","delimiter":false,"added":1,"id":"average"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"42":{"type":"data","title":"VMware Host CPU","query":"timeseries by: {`dt.entity.vmware:host`}, {\n  average_cpu = avg(vmware.host.cpu.usage.average)\n}\n\n\n| join[\n timeseries by: {`dt.entity.vmware:host`}, \n{\n  max_cpu = max(vmware.host.cpu.usage.average)\n}\n], on:{`dt.entity.vmware:host`}\n\n\n \n| join[\n timeseries by: {`dt.entity.vmware:host`}, from:now()-7d, to:now(),\n{\n  average_cpu = avg(vmware.host.cpu.usage.average)\n}\n], on:{`dt.entity.vmware:host`}, prefix:\"7d_\"\n\n\n| join[\n timeseries by: {`dt.entity.vmware:host`}, from:now()-30d, to:now(),\n{\n  average_cpu = avg(vmware.host.cpu.usage.average)\n}\n], on:{`dt.entity.vmware:host`}, prefix:\"30d_\"\n\n\n\n| fieldsAdd average_cpu_7d =arrayAvg(`7d_average_cpu` ),max_cpu = arrayMax(right.max_cpu) ,average_cpu_30d =arrayAvg(`30d_average_cpu`), average_cpu = arrayAvg(average_cpu), entityName(`dt.entity.vmware:host`), alias: Name\n\n| fieldsAdd entityAttr(`dt.entity.vmware:host`, \"runs_on\")\n| fieldsFlatten `dt.entity.vmware:host.runs_on`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:cluster` = `abc.dt.entity.vmware:cluster`\n| fieldsAdd entityName(`dt.entity.vmware:cluster`), entityName(`dt.entity.vmware:host`) \n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter` \n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in( `dt.entity.vmware:host.name`,$host)\n\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n| fields Name, average_cpu,max_cpu, average_cpu_7d, average_cpu_30d\n| fieldsRename `Host Name`=Name, `Average CPU %`=average_cpu, `Max CPU %` = max_cpu, `Average CPU % 7d`=average_cpu_7d, `Average CPU % 30d`=average_cpu_30d\n\n| sort `Average CPU %` desc\n| limit 10","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"Average CPU %","rules":[{"id":"0","label":"","comparator":"<","color":"#7dc540","value":100},{"id":"1","label":"","comparator":"<","color":"#f5d30f","value":40},{"id":"2","label":"","comparator":"<","color":"#dc172a","value":25}],"isEnabled":true},{"id":"1","title":"","field":"Average Memory %","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540","value":0},{"id":"1","label":"","comparator":"≥","color":"#f5d30f","value":60},{"id":"2","label":"","comparator":"≥","color":"#dc172a","value":90}],"isEnabled":false}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":["Host Name"],"categoryAxisLabel":"Host Name","valueAxis":["Average CPU %","Max CPU %","Average CPU % 7d","Average CPU % 30d"],"valueAxisLabel":"Average CPU %,Max CPU %,Average CPU % 7d,Average CPU % 30d","tooltipVariant":"single"},"hiddenLegendFields":[],"truncationMode":"middle"},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:host","prefixIcon":"","recordField":"dt.entity.vmware:host","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:host.name"],["B:dt.entity.vmware:host.name"],["timeframe"],["interval"]],"colorThresholdTarget":"background","columnTypeOverrides":[],"columnWidths":{"[\"Average CPU %\"]":216.55938720703125,"[\"Host Name\"]":318.3874969482422,"[\"Average CPU % 7d\"]":311.1374969482422,"[\"Max CPU %\"]":214.63125610351562}},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"blue","dataMappings":{"value":"Average CPU %"},"displayedFields":["Host Name"]},"histogram":{"dataMappings":[{"valueAxis":"Average CPU %","rangeAxis":""},{"valueAxis":"Max CPU %","rangeAxis":""},{"valueAxis":"Average CPU % 7d","rangeAxis":""},{"valueAxis":"Average CPU % 30d","rangeAxis":""}],"variant":"single","displayedFields":["Host Name"]},"unitsOverrides":[{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average"},{"identifier":"average","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"%","delimiter":false,"added":1,"id":"average"}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"43":{"type":"data","title":"Storage capacity VMware Cluster","query":"timeseries by: {`dt.entity.vmware:cluster` }, filter: { cluster.name != \"No Cluster\" },from:now()-90d, to:now(),  {\n  storage_capacity = avg(vmware.cluster.storage.capacity),\n  storage_used= avg(vmware.cluster.storage.used)  \n  }\n| fieldsAdd  storage_perc_used = 100*storage_used[]/storage_capacity[]\n| fieldsRemove storage_used, storage_capacity\n| fieldsAdd entityName(`dt.entity.vmware:cluster`)\n| filter in( `dt.entity.vmware:cluster.name`,$cluster)\n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter`\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in(`dt.entity.vmware:datacenter.name`, $datacenter)\n//| filter in(`dt.entity.vmware:vcenter.name`, $vcenter)\n","davis":{"enabled":true,"componentState":{"selectedAnalyzerName":"dt.statistics.ui.ForecastAnalyzer","inputData":{"dt.statistics.ui.ForecastAnalyzer":{"generalParameters":{"timeframe":{"startTime":"now-2h","endTime":"now"},"resolveDimensionalQueryData":true,"logVerbosity":"INFO"},"forecastHorizon":200,"forecastOffset":1,"query":"timeseries by: {`dt.entity.vmware:cluster` }, filter: { cluster.name != \"No Cluster\" },from:now()-90d, to:now(),  {\n  storage_capacity = avg(vmware.cluster.storage.capacity),\n  storage_used= avg(vmware.cluster.storage.used)  \n  }\n| fieldsAdd  storage_perc_used = 100*storage_used[]/storage_capacity[]\n| fieldsRemove storage_used, storage_capacity\n| fieldsAdd entityName(`dt.entity.vmware:cluster`)\n| filter in( `dt.entity.vmware:cluster.name`,\"NCLP0124\")\n| fieldsAdd entityAttr(`dt.entity.vmware:cluster`, \"child_of\")\n| fieldsFlatten `dt.entity.vmware:cluster.child_of`, prefix:\"abc.\"\n| fieldsRename `dt.entity.vmware:datacenter`=`abc.dt.entity.vmware:datacenter`\n| fieldsAdd entityName(`dt.entity.vmware:datacenter`)\n\n| filter in(`dt.entity.vmware:datacenter.name`, \"HPROD_INTRANET_DP2\",\"HPROD_INTERNET\")\n//| filter in(`dt.entity.vmware:vcenter.name`, $vcenter)\n"}}},"davisVisualization":{"isAvailable":true,"settings":{"visibleSections":"VISUALIZATION"},"selectedOutputs":["62724613","1897364542","-886900849","-168068266","-2108606888","-1807017393"]}},"visualization":"davis","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"average","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxisLabel":"dt.entity.vmware:cluster,dt.entity.vmware:cluster.name,dt.entity.vmware:datacenter,dt.entity.vmware:datacenter.name","valueAxisLabel":"interval","categoryAxis":["dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"],"valueAxis":["interval"],"tooltipVariant":"single"},"hiddenLegendFields":["dt.entity.vmware:cluster","dt.entity.vmware:cluster.child_of","dt.entity.vmware:datacenter","mem_capacity","mem_used"],"truncationMode":"middle","fieldMapping":{"timestamp":"timeframe","leftAxisValues":["mem_perc_used"]},"xAxisLabel":"timeframe","xAxisIsLabelVisible":false,"valueRepresentation":"absolute","leftYAxisSettings":{"isLabelVisible":true,"label":"Cluster Memory Capacity • Cluster Memory Used • Cluster Storage Capacity • Cluster Storage Used"}},"singleValue":{"showLabel":true,"label":"dt.entity.vmware:cluster","prefixIcon":"","recordField":"dt.entity.vmware:cluster","autoscale":true,"alignment":"center","colorThresholdTarget":"value","trend":{"trendType":"auto","isVisible":true}},"table":{"hiddenColumns":[["A:dt.entity.vmware:cluster.name"],["B:dt.entity.vmware:cluster.name"],["timeframe"],["interval"]],"colorThresholdTarget":"value","columnWidths":{"[\"Cluster Name\"]":186.328125,"[\"Storage Used\"]":231.1875,"[\"Memory Capacity\"]":223.609375,"[\"Memory Used\"]":171.265625,"[\"CPU Capacity\"]":183.765625,"[\"CPU Used\"]":136.421875,"[\"Cluster\"]":186.703125},"columnTypeOverrides":[{"fields":["mem_perc_used"],"value":"sparkline","id":1733920345638}]},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"colorMode":"color-palette","colorPalette":"categorical","dataMappings":{"value":"dt.entity.vmware:cluster"},"displayedFields":["dt.entity.vmware:cluster","dt.entity.vmware:cluster.name","dt.entity.vmware:datacenter","dt.entity.vmware:datacenter.name"]},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}],"variant":"single","displayedFields":["dt.entity.vmware:cluster"]},"unitsOverrides":[{"identifier":"CPU Used","unitCategory":"frequency","baseUnit":"megahertz","decimals":2,"suffix":"","delimiter":false,"added":0,"id":"average","displayUnit":null},{"identifier":"CPU Capacity","unitCategory":"frequency","baseUnit":"megahertz","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542519264},{"identifier":"Memory Used","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542599196},{"identifier":"Memory Capacity","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542625895},{"identifier":"Storage Capacity","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542641423},{"identifier":"Storage Used","unitCategory":"data","baseUnit":"mebibyte","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1722542722559},{"identifier":"mem_perc_used","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1733920249556}],"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}},"45":{"type":"data","title":"","query":"fetch events, from:now()-14d\n\n| filter event.kind == \"DAVIS_EVENT\"\n| filter event.category == \"RESOURCE_CONTENTION\"\n| sort timestamp desc\n| filter isNotNull(value)\n| filter isNotNull(violation.time)\n| fields violation.time, value, cluster.name, KPI = \"Used Cluster Memory in %\", timestamp\n| summarize takeLast(timestamp), by:{violation.time, value, cluster.name, KPI}\n| fields violation.time, value=toDouble(value), cluster.name, KPI\n\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[{"id":1,"field":"value","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6863)"},"comparator":">","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eca440)"},"comparator":"=","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c4233b)"},"comparator":"≥","label":"","value":60}]}],"chartSettings":{"xAxisScaling":"analyzedTimeframe","gapPolicy":"gap","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"curve":"linear","pointsDisplay":"auto","categoricalBarChartSettings":{"layout":"horizontal","categoryAxisTickLayout":"horizontal","scale":"absolute","groupMode":"stacked","colorPaletteMode":"multi-color","categoryAxis":["violation.time","cluster.name","KPI"],"categoryAxisLabel":"violation.time,cluster.name,KPI","valueAxis":["value"],"valueAxisLabel":"value","tooltipVariant":"single"},"colorPalette":"categorical","valueRepresentation":"absolute","truncationMode":"middle","xAxisLabel":"timestamp","xAxisIsLabelVisible":false,"hiddenLegendFields":["dt.entity.cloud_application","dt.entity.cloud_application_instance","dt.entity.cloud_application_namespace","dt.entity.kubernetes_cluster","dt.entity.kubernetes_node","dt.kubernetes.cluster","dt.kubernetes.event.involved_object","dt.kubernetes.node","dt.kubernetes.workload","event","k8sspace.name","k8s.pod"],"leftYAxisSettings":{}},"singleValue":{"showLabel":true,"label":"timestamp","prefixIcon":"","recordField":"timestamp","autoscale":true,"alignment":"center","trend":{"trendType":"auto","isVisible":true},"colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"linewrapEnabled":false,"lineWrapIds":[],"monospacedFontEnabled":false,"monospacedFontColumns":[],"columnWidths":{},"columnTypeOverrides":[],"enableThresholdInRow":true,"selectedColumnForRowThreshold":"value"},"honeycomb":{"shape":"hexagon","legend":{"hidden":false,"position":"auto"},"displayedFields":["violation.time","cluster.name","KPI"],"dataMappings":{"value":"value"},"truncationMode":"middle","colorMode":"color-palette","colorPalette":"blue"},"histogram":{"legend":"auto","yAxis":{"label":"Frequency","scale":"linear"},"colorPalette":"categorical","dataMappings":[{"valueAxis":"value","rangeAxis":""}],"variant":"single","truncationMode":"middle","displayedFields":["violation.time","cluster.name","KPI"]},"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false}}},"layouts":{"1":{"x":0,"y":15,"w":38,"h":2},"3":{"x":0,"y":4,"w":38,"h":1},"4":{"x":0,"y":7,"w":8,"h":4},"5":{"x":18,"y":7,"w":10,"h":4},"6":{"x":8,"y":7,"w":10,"h":4},"7":{"x":28,"y":7,"w":10,"h":4},"8":{"x":8,"y":11,"w":10,"h":4},"9":{"x":18,"y":11,"w":10,"h":4},"10":{"x":0,"y":11,"w":8,"h":4},"11":{"x":28,"y":11,"w":10,"h":4},"13":{"x":0,"y":49,"w":37,"h":1},"14":{"x":0,"y":36,"w":39,"h":5},"15":{"x":0,"y":74,"w":38,"h":1},"16":{"x":0,"y":84,"w":13,"h":8},"17":{"x":13,"y":84,"w":15,"h":8},"18":{"x":28,"y":84,"w":12,"h":8},"19":{"x":0,"y":92,"w":38,"h":1},"20":{"x":0,"y":93,"w":13,"h":10},"21":{"x":13,"y":93,"w":15,"h":10},"22":{"x":28,"y":93,"w":12,"h":10},"23":{"x":0,"y":110,"w":38,"h":1},"24":{"x":0,"y":103,"w":20,"h":7},"25":{"x":20,"y":111,"w":18,"h":7},"28":{"x":19,"y":75,"w":20,"h":9},"29":{"x":0,"y":75,"w":19,"h":9},"30":{"x":0,"y":41,"w":40,"h":8},"31":{"x":0,"y":17,"w":21,"h":9},"32":{"x":0,"y":5,"w":38,"h":2},"33":{"x":21,"y":17,"w":19,"h":9},"34":{"x":0,"y":50,"w":38,"h":2},"35":{"x":0,"y":53,"w":19,"h":10},"37":{"x":19,"y":53,"w":19,"h":10},"39":{"x":0,"y":52,"w":38,"h":1},"40":{"x":0,"y":63,"w":38,"h":1},"41":{"x":0,"y":64,"w":19,"h":10},"42":{"x":19,"y":64,"w":19,"h":10},"43":{"x":0,"y":26,"w":40,"h":10},"45":{"x":18,"y":0,"w":20,"h":4}},"importedWithCode":false,"settings":{"gridLayout":{"mode":"responsive","columnsCount":40}}}